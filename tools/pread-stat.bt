#!/usr/bin/env bpftrace

BEGIN
{

        printf("Tracing nvme command latency.Hit Ctrl-C to end.\n");
}

tracepoint:syscalls:sys_enter_pread64
/ pid == $1 /
{
	@data = hist(args->count);
}

interval:s:1800
{
	print(@data);
	clear(@data);
}
